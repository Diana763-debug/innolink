<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8" />
  <title>Idea Details</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: 30px auto; }
    nav a { margin-right: 15px; text-decoration: none; color: #333; }
    iframe { width: 100%; height: 400px; border: 1px solid #000; margin-bottom: 20px; }
    textarea, button { width: 100%; margin-top: 10px; }
    button { padding: 10px; }
  </style>
</head>
<body>
  <nav>
    <a href="home.html">Home</a>
    <a href="upload.html">Upload</a>
  </nav>

  <h2 id="ideaTitle"></h2>
  <iframe id="pdfViewer" src="" frameborder="0"></iframe>
  <p><strong>Idea Description:</strong> <span id="ideaDescription"></span></p>
  <p><strong>Price:</strong> RM <span id="ideaPrice"></span></p>

  <button id="buyNowBtn">Buy Now</button>

  <hr />
  <div>
    <h3>Comment</h3>
    <textarea id="commentBox" rows="4" placeholder="Write your comment here..."></textarea>
    <button id="submitCommentBtn">Submit Comment</button>
  </div>

  <script>
    // Dapatkan ID idea dari URL
    const params = new URLSearchParams(window.location.search);
    const id = parseInt(params.get('id'));
    if (!id) {
      alert('ID idea tidak diberikan!');
      window.location.href = 'home.html';
    }

    // Ambil data ideas dari localStorage
    const ideas = JSON.parse(localStorage.getItem('ideas')) || [];
    const idea = ideas.find(i => i.id === id);
    if (!idea) {
      alert('Idea tidak dijumpai!');
      window.location.href = 'home.html';
    }

    // Paparkan maklumat idea
    document.getElementById('ideaTitle').innerText = idea.title;
    document.getElementById('ideaDescription').innerText = idea.description;
    document.getElementById('ideaPrice').innerText = idea.price;
    document.getElementById('pdfViewer').src = idea.pdf;

    document.getElementById('buyNowBtn').addEventListener('click', () => {
      alert('Butang Buy Now ditekan!');
    });

    document.getElementById('submitCommentBtn').addEventListener('click', () => {
      const comment = document.getElementById('commentBox').value.trim();
      if (!comment) {
        alert('Sila tulis komen terlebih dahulu!');
        return;
      }
      alert('Komen dihantar: ' + comment);
      document.getElementById('commentBox').value = '';
      // Nota: komen tidak disimpan di mana-mana dalam demo ini
    });
  </script>
</body>
</html>
